<div class="flex">
	<h3>Room:</h3>
	<h5>&nbsp;{{ roomId }}</h5>
</div>
<div class="flex" *ngIf="!needsPassword && !submittedCart">
	<h3 style="line-height: .2;">Hunger Bucks Remaining:</h3>
	<h5 style="line-height: .2;">&nbsp;{{ hungerBucksRemaining }}</h5>
</div>
<hr class="negative-margins">
<div class="col-12 no-pad" *ngIf="needsPassword">
	<h5 class="margin-top">Enter Room Password:</h5>
	<input [(ngModel)]="password" (ngModelChange)="resetValidation()" class="form-control" type="text">
	<div [hidden]="!invalidPasswordChecked" class="alert alert-danger">
    Invalid password or the room does not exist.
  </div>
  <button (click)="checkPassword()" type="button" [disabled]="!password" class="btn btn-primary btn-lg btn-block btn-list margin-top">
		Enter Room
	</button>
	<button *ngIf="showDifferentRoomButton" [routerLink]="['../..']" type="button" class="btn btn-danger btn-lg btn-block btn-list">
		Create / Join Different Room
	</button>
</div>
<div class="col-12 no-pad flex-space-between" *ngIf="!needsPassword && !submittedCart">
	<button class="btn btn-lg btn-list text-white" [ngClass]="{'btn-primary' : (showRestaurants || showCategories)}" (click)="showBrowseDivs()">Browse</button>
	<button class="btn btn-lg btn-list text-white" [ngClass]="{'btn-primary' : showCart}" (click)="showCartDiv()">Cart</button>
</div>
<hr *ngIf="!needsPassword && !submittedCart" class="negative-margins">
<div *ngIf="!(orders === undefined || orders.length === 0) && showCart" class="col-12 text-right no-pad">
	<button class="btn btn-lg btn-list text-white" (click)="submitCart()">Submit Cart</button>
	<hr class="negative-margins">
</div>
<div *ngIf="showCategories || showRestaurants" class="flex">
	<button *ngIf="showRestaurants" [@flyInOut] (click)="goBackToCategories()" class="btn btn-primary btn-lg back-button text-left"><i class="fa fa-arrow-left no-margin" aria-hidden="true"></i></button>
	<h5 class="next-to-button">{{ browseTitle }}</h5>
</div>
<hr *ngIf="!showLoading && !showCart && !submittedCart" class="negative-margins">
<h5 *ngIf="(orders === undefined || orders.length === 0) && showCart" class="margin-top">Your cart is empty. Click browse to find restaurants.</h5>
<h5 class="margin-top" *ngIf="(restaurants === undefined || restaurants.length === 0) && !showLoading && showRestaurants">No restaurants found.</h5>
<div class="col-sm-12 no-pad" *ngIf="!needsPassword">
	<div class="row no-pad">
		<div *ngIf="showCart" class="col-sm-12 no-pad text-left">
			<div class="map-results-content">
				<div class="listing-row-medium"*ngFor="let item of orders; let i = index">
					<div class="listing-row-medium-inner flex-space-between">
						<div>
							<div class="listing-row-medium-content">
                <div class="listing-row-medium-price">
                	<ng-container [@slide] *ngFor="let dollar of getDollarSigns(item.restaurant.price_range)">{{ dollar }}</ng-container>
              	</div>
								<div class="listing-row-medium-category tag">{{ item.restaurant.cuisines }}</div>

								<h4 class="listing-row-medium-title"><div>{{ item.restaurant.name }}</div></h4>

								<div class="listing-row-medium-address">{{ item.restaurant.location.address }}</div>
								<div>
									<span class="listing-row-medium-rating float-none">
										<span>({{ item.restaurant.user_rating.aggregate_rating }})</span>

	                  <b [innerHTML]="buildRating(item.restaurant.user_rating.aggregate_rating)"></b>
									</span>
								</div>
							</div>
						</div>
						<div class="text-right">
							<button (click)="spendHungerBuck(item.restaurant)" class="btn btn-lg btn-block btn-list text-white"><i class="fa fa-plus no-margin" aria-hidden="true"></i></button>
							<ng-container>
							<div class="text-center">
								{{ getRestaurantHungerBucksTotal(item.restaurant.id) }}
							</div>
							</ng-container>
							<button (click)="refundHungerBuck(item.restaurant)" class="btn btn-lg btn-block btn-list text-white"><i class="fa fa-minus no-margin" aria-hidden="true"></i></button>
						</div>	
			    </div>
				</div>
			</div>
		</div>
		<div *ngIf="showCategories" class="col-sm-12 no-pad" [@flyInOut]>
			<div class="col-sm-12 no-pad" *ngIf="showLoading" [@flyInOut]>
				<div class="progress">
				  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
				</div>
			</div>
			<div [@slide]>
				<div class="map-results-content clickable">
					<div class="listing-row-medium" *ngFor="let item of categories; let i = index"
               (click)="onCategoryClick(item.categories.id)">
						<div class="listing-row-medium-inner">
							<div class="listing-row-medium-content">
								<h3>{{ item.categories.name }}</h3>
							</div>
				    </div>
					</div>		
				</div>
			</div>
		</div>
		<div *ngIf="showRestaurants" class="col-sm-12 no-pad" [@flyInOut]>
			<div class="col-sm-12 no-pad" *ngIf="showLoading" [@flyInOut]>
				<div class="progress">
				  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
				</div>
			</div>
			<div [@slide]>
				<div class="map-results-content">
					<div class="listing-row-medium" *ngFor="let item of restaurants; let i = index">
						<div class="listing-row-medium-inner flex-space-between">
							<div>
								<div class="listing-row-medium-content">
	                <div class="listing-row-medium-price">
	                	<ng-container [@slide] *ngFor="let dollar of getDollarSigns(item.restaurant.price_range)">{{ dollar }}</ng-container>
	              	</div>
									<div class="listing-row-medium-category tag">{{ item.restaurant.cuisines }}</div>

									<h4 class="listing-row-medium-title"><div>{{ item.restaurant.name }}</div></h4>

									<div class="listing-row-medium-address">{{ item.restaurant.location.address }}</div>
									<div>
										<span class="listing-row-medium-rating float-none">
											<span>({{ item.restaurant.user_rating.aggregate_rating }})</span>

		                  <b [innerHTML]="buildRating(item.restaurant.user_rating.aggregate_rating)"></b>
										</span>
									</div>
								</div>
							</div>
							<div class="text-right">
								<button (click)="spendHungerBuck(item.restaurant)" class="btn btn-lg btn-block btn-list text-white"><i class="fa fa-plus no-margin" aria-hidden="true"></i></button>
								<ng-container>
								<div class="text-center">
									{{ getRestaurantHungerBucksTotal(item.restaurant.id) }}
								</div>
								</ng-container>
								<button (click)="refundHungerBuck(item.restaurant)" class="btn btn-lg btn-block btn-list text-white"><i class="fa fa-minus no-margin" aria-hidden="true"></i></button>
							</div>	
				    </div>
					</div>
				</div>	
			</div>
		</div>
		<div *ngIf="submittedCart" class="col-sm-12 text-left">
			<div *ngIf="room.inProgress">
				<h5 *ngIf="room.owner !== uid">Other users are still making selections. Please wait...</h5>
				<div *ngIf="room.owner === uid">
					<h5>Users That Have Submitted:</h5>
					<div *ngFor="let submission of room.submissions | keys">
						{{ submission.key }}
					</div>
					<p>Once all desired users have submitted their Hunger Bucks, click the button below to show the results.</p>
					<button (click)="showResults()" class="btn btn-lg btn-block btn-list text-white">Decide!</button>
				</div>
			</div>
			<div *ngIf="!room.inProgress">
				<div class="flex-space-between">
					<h5>Restaurant</h5>
					<h5>Hunger Bucks</h5>
				</div>
				<hr class="negative-margins">
				<div class="map-results-content">
					<div class="listing-row-medium negative-margins" *ngFor="let item of results | keys">
						<div class="listing-row-medium-inner flex-space-between">
							<div>
								<div class="listing-row-medium-content">
	                <div class="listing-row-medium-price">
	                	<ng-container [@slide] *ngFor="let dollar of getDollarSigns(item.value.restaurant.price_range)">{{ dollar }}</ng-container>
	              	</div>
									<div class="listing-row-medium-category tag">{{ item.value.restaurant.cuisines }}</div>

									<h4 class="listing-row-medium-title"><div>{{ item.value.restaurant.name }}</div></h4>

									<div class="listing-row-medium-address">{{ item.value.restaurant.location.address }}</div>
									<div>
										<span class="listing-row-medium-rating float-none">
											<span>({{ item.value.restaurant.user_rating.aggregate_rating }})</span>

		                  <b [innerHTML]="buildRating(item.value.restaurant.user_rating.aggregate_rating)"></b>
										</span>
									</div>
								</div>
							</div>
							<div class="text-right">
								<ng-container>
								<div class="text-center">
									<h5>{{ item.value.balance }}</h5>
								</div>
								</ng-container>
							</div>	
				    </div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>